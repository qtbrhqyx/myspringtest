<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="5170px" preserveAspectRatio="none" style="width:7464px;height:5170px;" version="1.1" viewBox="0 0 7464 5170" width="7464px" zoomAndPan="magnify"><defs><filter height="300%" id="fxyt5pqwasg4d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="3649" y="52.0879">多级循环依赖</text><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="220" x2="220" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="614" x2="614" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="929" x2="929" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1111" x2="1111" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1426" x2="1426" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1648" x2="1648" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1922" x2="1922" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2282" x2="2282" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="3151" x2="3151" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="3427" x2="3427" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="4366" x2="4366" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="4906" x2="4906" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="5142" x2="5142" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="5378" x2="5378" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="6182" x2="6182" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="6498" x2="6498" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="6744" x2="6744" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="7044" x2="7044" y1="148.4805" y2="5084.1309"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="7348" x2="7348" y1="148.4805" y2="5084.1309"/><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="400" x="16" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="372" x="30" y="118.3281">finishBeanFactoryInitialization</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="400" x="16" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="372" x="30" y="5128.2188">finishBeanFactoryInitialization</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="332" x="444" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="304" x="458" y="118.3281">preInstantiateSingletons</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="332" x="444" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="304" x="458" y="5128.2188">preInstantiateSingletons</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="134" x="859" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="106" x="873" y="118.3281">getBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="134" x="859" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="106" x="873" y="5128.2188">getBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="172" x="1021" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="144" x="1035" y="118.3281">doGetBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="172" x="1021" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="144" x="1035" y="5128.2188">doGetBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="174" x="1336" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="146" x="1350" y="118.3281">createBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="174" x="1336" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="146" x="1350" y="5128.2188">createBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="212" x="1538" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="184" x="1552" y="118.3281">doCreateBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="212" x="1538" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="184" x="1552" y="5128.2188">doCreateBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="280" x="1778" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="252" x="1792" y="118.3281">createBeanInstance</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="280" x="1778" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="252" x="1792" y="5128.2188">createBeanInstance</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="384" x="2086" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="356" x="2100" y="118.3281">java.lang.reflect.Constructor</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="384" x="2086" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="356" x="2100" y="5128.2188">java.lang.reflect.Constructor</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="290" x="3003" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="262" x="3017" y="118.3281">addSingletonFactory</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="290" x="3003" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="262" x="3017" y="5128.2188">addSingletonFactory</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="204" x="3321" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="176" x="3335" y="118.3281">populateBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="204" x="3321" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="176" x="3335" y="5128.2188">populateBean</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="314" x="4206" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="286" x="4220" y="118.3281">postProcessProperties</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="314" x="4206" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="286" x="4220" y="5128.2188">postProcessProperties</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="322" x="4742" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="294" x="4756" y="118.3281">findAutowiringMetadata</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="322" x="4742" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="294" x="4756" y="5128.2188">findAutowiringMetadata</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="94" x="5092" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="66" x="5106" y="118.3281">inject</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="94" x="5092" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="66" x="5106" y="5128.2188">inject</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="322" x="5214" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="294" x="5228" y="118.3281">doResolveDependency</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="322" x="5214" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="294" x="5228" y="5128.2188">doResolveDependency</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="326" x="6016" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="298" x="6030" y="118.3281">findAutowireCandidates</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="326" x="6016" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="298" x="6030" y="5128.2188">findAutowireCandidates</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="250" x="6370" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="222" x="6384" y="118.3281">resolveCandidate</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="250" x="6370" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="222" x="6384" y="5128.2188">resolveCandidate</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="186" x="6648" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="158" x="6662" y="118.3281">getSingleton</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="186" x="6648" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="158" x="6662" y="5128.2188">getSingleton</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="358" x="6862" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="330" x="6876" y="118.3281">java.lang.reflect.Field.sets</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="358" x="6862" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="330" x="6876" y="5128.2188">java.lang.reflect.Field.sets</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="194" x="7248" y="72.2402"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="166" x="7262" y="118.3281">addSingleton</text><rect fill="#FEFECE" filter="url(#fxyt5pqwasg4d)" height="66.2402" style="stroke: #A80036; stroke-width: 3.0;" width="194" x="7248" y="5082.1309"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="166" x="7262" y="5128.2188">addSingleton</text><polygon fill="#A80036" points="590,207.9893,610,215.9893,590,223.9893,598,215.9893" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="220" x2="602" y1="215.9893" y2="215.9893"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="182" x="234" y="206.2764">准备实例化单例</text><polygon fill="#A80036" points="906,271.498,926,279.498,906,287.498,914,279.498" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="614" x2="918" y1="279.498" y2="279.498"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="628" y="269.7852">开始创建第一个Bean A</text><polygon fill="#A80036" points="1087,299.498,1107,307.498,1087,315.498,1095,307.498" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="930" x2="1099" y1="307.498" y2="307.498"/><polygon fill="#A80036" points="1403,363.0068,1423,371.0068,1403,379.0068,1411,371.0068" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1111" x2="1415" y1="371.0068" y2="371.0068"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="1125" y="361.2939">Bean A不存在开始创建</text><polygon fill="#A80036" points="1624,391.0068,1644,399.0068,1624,407.0068,1632,399.0068" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1427" x2="1636" y1="399.0068" y2="399.0068"/><polygon fill="#A80036" points="1898,454.5156,1918,462.5156,1898,470.5156,1906,462.5156" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1648" x2="1910" y1="462.5156" y2="462.5156"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="1662" y="452.8027">A创建实例</text><polygon fill="#A80036" points="2258,518.0244,2278,526.0244,2258,534.0244,2266,526.0244" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1922" x2="2270" y1="526.0244" y2="526.0244"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="182" x="1936" y="516.3115">无参构造实例化</text><polygon fill="#A80036" points="3128,581.5332,3148,589.5332,3128,597.5332,3136,589.5332" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1648" x2="3140" y1="589.5332" y2="589.5332"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="1404" x="1662" y="579.8203">A放入三级缓存。此时,三级缓存singletonFactories：A；二级缓存earlySingletonObjects: 无；一级缓存singletonObjects:无</text><polygon fill="#A80036" points="3403,645.042,3423,653.042,3403,661.042,3411,653.042" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1648" x2="3415" y1="653.042" y2="653.042"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="1662" y="643.3291">设置属性依赖</text><polygon fill="#A80036" points="4343,708.5508,4363,716.5508,4343,724.5508,4351,716.5508" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="3427" x2="4355" y1="716.5508" y2="716.5508"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="892" x="3441" y="706.8379">循环BeanPostProcessor,找到AutowiredAnnotationBeanPostProcessor处理器</text><polygon fill="#A80036" points="4883,772.0596,4903,780.0596,4883,788.0596,4891,780.0596" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="4367" x2="4895" y1="780.0596" y2="780.0596"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="492" x="4381" y="770.3467">查找带autowired注解的属性元数据，找到B</text><polygon fill="#A80036" points="5119,835.5684,5139,843.5684,5119,851.5684,5127,843.5684" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="4367" x2="5131" y1="843.5684" y2="843.5684"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="4381" y="833.8555">注入依赖属性</text><polygon fill="#A80036" points="5355,899.0771,5375,907.0771,5355,915.0771,5363,907.0771" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5143" x2="5367" y1="907.0771" y2="907.0771"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="104" x="5157" y="897.3643">解决依赖</text><polygon fill="#A80036" points="6159,962.5859,6179,970.5859,6159,978.5859,6167,970.5859" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5379" x2="6171" y1="970.5859" y2="970.5859"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="756" x="5393" y="960.873">根据属性类型（属性类型有可能是接口）找到真正依赖的class类B</text><polygon fill="#A80036" points="6475,1026.0947,6495,1034.0947,6475,1042.0947,6483,1034.0947" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5379" x2="6487" y1="1034.0947" y2="1034.0947"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="5393" y="1024.3818">解决依赖B</text><polygon fill="#A80036" points="952,1089.6035,932,1097.6035,952,1105.6035,944,1097.6035" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="940" x2="6497" y1="1097.6035" y2="1097.6035"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="138" x="964" y="1087.8906">查找Bean B</text><polygon fill="#A80036" points="1087,1117.6035,1107,1125.6035,1087,1133.6035,1095,1125.6035" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="930" x2="1099" y1="1125.6035" y2="1125.6035"/><polygon fill="#A80036" points="1403,1181.1123,1423,1189.1123,1403,1197.1123,1411,1189.1123" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1111" x2="1415" y1="1189.1123" y2="1189.1123"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="1125" y="1179.3994">Bean B不存在开始创建</text><polygon fill="#A80036" points="1624,1209.1123,1644,1217.1123,1624,1225.1123,1632,1217.1123" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1427" x2="1636" y1="1217.1123" y2="1217.1123"/><polygon fill="#A80036" points="1898,1272.6211,1918,1280.6211,1898,1288.6211,1906,1280.6211" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1648" x2="1910" y1="1280.6211" y2="1280.6211"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="1662" y="1270.9082">B创建实例</text><polygon fill="#A80036" points="2258,1336.1299,2278,1344.1299,2258,1352.1299,2266,1344.1299" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1922" x2="2270" y1="1344.1299" y2="1344.1299"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="182" x="1936" y="1334.417">无参构造实例化</text><polygon fill="#A80036" points="3128,1399.6387,3148,1407.6387,3128,1415.6387,3136,1407.6387" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1648" x2="3140" y1="1407.6387" y2="1407.6387"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="1430" x="1662" y="1397.9258">B放入三级缓存。此时,三级缓存singletonFactories：A,B；二级缓存earlySingletonObjects: 无；一级缓存singletonObjects:无</text><polygon fill="#A80036" points="3403,1463.1475,3423,1471.1475,3403,1479.1475,3411,1471.1475" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1648" x2="3415" y1="1471.1475" y2="1471.1475"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="1662" y="1461.4346">设置属性依赖</text><polygon fill="#A80036" points="4343,1526.6563,4363,1534.6563,4343,1542.6563,4351,1534.6563" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="3427" x2="4355" y1="1534.6563" y2="1534.6563"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="892" x="3441" y="1524.9434">循环BeanPostProcessor,找到AutowiredAnnotationBeanPostProcessor处理器</text><polygon fill="#A80036" points="4883,1590.165,4903,1598.165,4883,1606.165,4891,1598.165" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="4367" x2="4895" y1="1598.165" y2="1598.165"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="492" x="4381" y="1588.4521">查找带autowired注解的属性元数据，找到C</text><polygon fill="#A80036" points="5119,1653.6738,5139,1661.6738,5119,1669.6738,5127,1661.6738" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="4367" x2="5131" y1="1661.6738" y2="1661.6738"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="4381" y="1651.9609">注入依赖属性</text><polygon fill="#A80036" points="5355,1717.1826,5375,1725.1826,5355,1733.1826,5363,1725.1826" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5143" x2="5367" y1="1725.1826" y2="1725.1826"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="104" x="5157" y="1715.4697">解决依赖</text><polygon fill="#A80036" points="6159,1780.6914,6179,1788.6914,6159,1796.6914,6167,1788.6914" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5379" x2="6171" y1="1788.6914" y2="1788.6914"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="756" x="5393" y="1778.9785">根据属性类型（属性类型有可能是接口）找到真正依赖的class类C</text><polygon fill="#A80036" points="6475,1844.2002,6495,1852.2002,6475,1860.2002,6483,1852.2002" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5379" x2="6487" y1="1852.2002" y2="1852.2002"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="5393" y="1842.4873">解决依赖C</text><polygon fill="#A80036" points="952,1907.709,932,1915.709,952,1923.709,944,1915.709" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="940" x2="6497" y1="1915.709" y2="1915.709"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="138" x="964" y="1905.9961">查找Bean C</text><polygon fill="#A80036" points="1087,1935.709,1107,1943.709,1087,1951.709,1095,1943.709" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="930" x2="1099" y1="1943.709" y2="1943.709"/><polygon fill="#A80036" points="1403,1999.2178,1423,2007.2178,1403,2015.2178,1411,2007.2178" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1111" x2="1415" y1="2007.2178" y2="2007.2178"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="1125" y="1997.5049">Bean C不存在开始创建</text><polygon fill="#A80036" points="1624,2027.2178,1644,2035.2178,1624,2043.2178,1632,2035.2178" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1427" x2="1636" y1="2035.2178" y2="2035.2178"/><polygon fill="#A80036" points="1898,2090.7266,1918,2098.7266,1898,2106.7266,1906,2098.7266" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1648" x2="1910" y1="2098.7266" y2="2098.7266"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="1662" y="2089.0137">C创建实例</text><polygon fill="#A80036" points="2258,2154.2354,2278,2162.2354,2258,2170.2354,2266,2162.2354" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1922" x2="2270" y1="2162.2354" y2="2162.2354"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="182" x="1936" y="2152.5225">无参构造实例化</text><polygon fill="#A80036" points="3128,2217.7441,3148,2225.7441,3128,2233.7441,3136,2225.7441" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1648" x2="3140" y1="2225.7441" y2="2225.7441"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="1456" x="1662" y="2216.0313">C放入三级缓存。此时,三级缓存singletonFactories：A,B,C；二级缓存earlySingletonObjects: 无；一级缓存singletonObjects:无</text><polygon fill="#A80036" points="3403,2281.2529,3423,2289.2529,3403,2297.2529,3411,2289.2529" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1648" x2="3415" y1="2289.2529" y2="2289.2529"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="1662" y="2279.54">设置属性依赖</text><polygon fill="#A80036" points="4343,2344.7617,4363,2352.7617,4343,2360.7617,4351,2352.7617" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="3427" x2="4355" y1="2352.7617" y2="2352.7617"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="892" x="3441" y="2343.0488">循环BeanPostProcessor,找到AutowiredAnnotationBeanPostProcessor处理器</text><polygon fill="#A80036" points="4883,2408.2705,4903,2416.2705,4883,2424.2705,4891,2416.2705" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="4367" x2="4895" y1="2416.2705" y2="2416.2705"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="492" x="4381" y="2406.5576">查找带autowired注解的属性元数据，找到A</text><polygon fill="#A80036" points="5119,2471.7793,5139,2479.7793,5119,2487.7793,5127,2479.7793" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="4367" x2="5131" y1="2479.7793" y2="2479.7793"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="4381" y="2470.0664">注入依赖属性</text><polygon fill="#A80036" points="5355,2535.2881,5375,2543.2881,5355,2551.2881,5363,2543.2881" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5143" x2="5367" y1="2543.2881" y2="2543.2881"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="104" x="5157" y="2533.5752">解决依赖</text><polygon fill="#A80036" points="6159,2598.7969,6179,2606.7969,6159,2614.7969,6167,2606.7969" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5379" x2="6171" y1="2606.7969" y2="2606.7969"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="756" x="5393" y="2597.084">根据属性类型（属性类型有可能是接口）找到真正依赖的class类A</text><polygon fill="#A80036" points="6475,2662.3057,6495,2670.3057,6475,2678.3057,6483,2670.3057" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5379" x2="6487" y1="2670.3057" y2="2670.3057"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="5393" y="2660.5928">解决依赖A</text><polygon fill="#A80036" points="952,2725.8145,932,2733.8145,952,2741.8145,944,2733.8145" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="940" x2="6497" y1="2733.8145" y2="2733.8145"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="138" x="964" y="2724.1016">查找Bean A</text><polygon fill="#A80036" points="1087,2753.8145,1107,2761.8145,1087,2769.8145,1095,2761.8145" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="930" x2="1099" y1="2761.8145" y2="2761.8145"/><polygon fill="#A80036" points="6721,2817.3232,6741,2825.3232,6721,2833.3232,6729,2825.3232" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1111" x2="6733" y1="2825.3232" y2="2825.3232"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="2002" x="1125" y="2815.6104">此方法从三级缓存查到，然后放进二级缓存，并从三级缓存删除。此时三级缓存singletonFactories：B,C；二级缓存earlySingletonObjects: A；一级缓存singletonObjects:无 ；</text><polygon fill="#A80036" points="952,2880.832,932,2888.832,952,2896.832,944,2888.832" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="940" x2="6743" y1="2888.832" y2="2888.832"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="964" y="2879.1191">返回</text><polygon fill="#A80036" points="6475,2944.3408,6495,2952.3408,6475,2960.3408,6483,2952.3408" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="930" x2="6487" y1="2952.3408" y2="2952.3408"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="944" y="2942.6279">返回</text><polygon fill="#A80036" points="5401,3007.8496,5381,3015.8496,5401,3023.8496,5393,3015.8496" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5389" x2="6497" y1="3015.8496" y2="3015.8496"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="5413" y="3006.1367">返回</text><polygon fill="#A80036" points="5165,3071.3584,5145,3079.3584,5165,3087.3584,5157,3079.3584" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5153" x2="5377" y1="3079.3584" y2="3079.3584"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="5177" y="3069.6455">返回</text><polygon fill="#A80036" points="7021,3134.8672,7041,3142.8672,7021,3150.8672,7029,3142.8672" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5143" x2="7033" y1="3142.8672" y2="3142.8672"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="192" x="5157" y="3133.1543">真正设置C依赖A</text><polygon fill="#A80036" points="4389,3198.376,4369,3206.376,4389,3214.376,4381,3206.376" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="4377" x2="5141" y1="3206.376" y2="3206.376"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="4401" y="3196.6631">返回</text><polygon fill="#A80036" points="3449,3261.8848,3429,3269.8848,3449,3277.8848,3441,3269.8848" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3437" x2="4365" y1="3269.8848" y2="3269.8848"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="3461" y="3260.1719">返回</text><polygon fill="#A80036" points="1670,3325.3936,1650,3333.3936,1670,3341.3936,1662,3333.3936" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1658" x2="3425" y1="3333.3936" y2="3333.3936"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1682" y="3323.6807">返回</text><polygon fill="#A80036" points="1449,3388.9023,1429,3396.9023,1449,3404.9023,1441,3396.9023" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1437" x2="1646" y1="3396.9023" y2="3396.9023"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1461" y="3387.1895">返回</text><polygon fill="#A80036" points="6721,3452.4111,6741,3460.4111,6721,3468.4111,6729,3460.4111" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1427" x2="6733" y1="3460.4111" y2="3460.4111"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1441" y="3450.6982">返回</text><polygon fill="#A80036" points="7325,3515.9199,7345,3523.9199,7325,3531.9199,7333,3523.9199" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="6745" x2="7337" y1="3523.9199" y2="3523.9199"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="390" x="6759" y="3514.207">把C放入一级缓存,从三级缓存移除</text><polygon fill="#A80036" points="952,3579.4287,932,3587.4287,952,3595.4287,944,3587.4287" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="940" x2="6743" y1="3587.4287" y2="3587.4287"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="70" x="964" y="3577.7158">返回C</text><polygon fill="#A80036" points="6475,3642.9375,6495,3650.9375,6475,3658.9375,6483,3650.9375" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="930" x2="6487" y1="3650.9375" y2="3650.9375"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="70" x="944" y="3641.2246">返回C</text><polygon fill="#A80036" points="5401,3706.4463,5381,3714.4463,5401,3722.4463,5393,3714.4463" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5389" x2="6497" y1="3714.4463" y2="3714.4463"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="5413" y="3704.7334">返回</text><polygon fill="#A80036" points="5165,3769.9551,5145,3777.9551,5165,3785.9551,5157,3777.9551" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5153" x2="5377" y1="3777.9551" y2="3777.9551"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="5177" y="3768.2422">返回</text><polygon fill="#A80036" points="7021,3833.4639,7041,3841.4639,7021,3849.4639,7029,3841.4639" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5143" x2="7033" y1="3841.4639" y2="3841.4639"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="192" x="5157" y="3831.751">真正设置B依赖C</text><polygon fill="#A80036" points="4389,3896.9727,4369,3904.9727,4389,3912.9727,4381,3904.9727" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="4377" x2="5141" y1="3904.9727" y2="3904.9727"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="4401" y="3895.2598">返回</text><polygon fill="#A80036" points="3449,3960.4814,3429,3968.4814,3449,3976.4814,3441,3968.4814" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="3437" x2="4365" y1="3968.4814" y2="3968.4814"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="3461" y="3958.7686">返回</text><polygon fill="#A80036" points="1670,4023.9902,1650,4031.9902,1670,4039.9902,1662,4031.9902" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1658" x2="3425" y1="4031.9902" y2="4031.9902"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1682" y="4022.2773">返回</text><polygon fill="#A80036" points="1449,4087.499,1429,4095.499,1449,4103.499,1441,4095.499" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1437" x2="1646" y1="4095.499" y2="4095.499"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1461" y="4085.7861">返回</text><polygon fill="#A80036" points="6721,4151.0078,6741,4159.0078,6721,4167.0078,6729,4159.0078" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1427" x2="6733" y1="4159.0078" y2="4159.0078"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1441" y="4149.2949">返回</text><polygon fill="#A80036" points="7325,4214.5166,7345,4222.5166,7325,4230.5166,7333,4222.5166" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="6745" x2="7337" y1="4222.5166" y2="4222.5166"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="390" x="6759" y="4212.8037">把B放入一级缓存,从三级缓存移除</text><polygon fill="#A80036" points="952,4278.0254,932,4286.0254,952,4294.0254,944,4286.0254" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="940" x2="6743" y1="4286.0254" y2="4286.0254"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="70" x="964" y="4276.3125">返回B</text><polygon fill="#A80036" points="6475,4341.5342,6495,4349.5342,6475,4357.5342,6483,4349.5342" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="930" x2="6487" y1="4349.5342" y2="4349.5342"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="70" x="944" y="4339.8213">返回B</text><polygon fill="#A80036" points="5401,4405.043,5381,4413.043,5401,4421.043,5393,4413.043" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5389" x2="6497" y1="4413.043" y2="4413.043"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="5413" y="4403.3301">返回</text><polygon fill="#A80036" points="5165,4468.5518,5145,4476.5518,5165,4484.5518,5157,4476.5518" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="5153" x2="5377" y1="4476.5518" y2="4476.5518"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="5177" y="4466.8389">返回</text><polygon fill="#A80036" points="7021,4532.0605,7041,4540.0605,7021,4548.0605,7029,4540.0605" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="5143" x2="7033" y1="4540.0605" y2="4540.0605"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="192" x="5157" y="4530.3477">真正设置A依赖B</text><polygon fill="#A80036" points="4389,4595.5693,4369,4603.5693,4389,4611.5693,4381,4603.5693" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="4377" x2="5141" y1="4603.5693" y2="4603.5693"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="4401" y="4593.8564">返回</text><polygon fill="#A80036" points="3449,4659.0781,3429,4667.0781,3449,4675.0781,3441,4667.0781" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="3437" x2="4365" y1="4667.0781" y2="4667.0781"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="3461" y="4657.3652">返回</text><polygon fill="#A80036" points="1670,4722.5869,1650,4730.5869,1670,4738.5869,1662,4730.5869" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1658" x2="3425" y1="4730.5869" y2="4730.5869"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1682" y="4720.874">返回</text><polygon fill="#A80036" points="1449,4786.0957,1429,4794.0957,1449,4802.0957,1441,4794.0957" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1437" x2="1646" y1="4794.0957" y2="4794.0957"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1461" y="4784.3828">返回</text><polygon fill="#A80036" points="6721,4849.6045,6741,4857.6045,6721,4865.6045,6729,4857.6045" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="1427" x2="6733" y1="4857.6045" y2="4857.6045"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="52" x="1441" y="4847.8916">返回</text><polygon fill="#A80036" points="7325,4913.1133,7345,4921.1133,7325,4929.1133,7333,4921.1133" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="6745" x2="7337" y1="4921.1133" y2="4921.1133"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="390" x="6759" y="4911.4004">把A放入一级缓存,从二级缓存移除</text><polygon fill="#A80036" points="952,4976.6221,932,4984.6221,952,4992.6221,944,4984.6221" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="940" x2="6743" y1="4984.6221" y2="4984.6221"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="70" x="964" y="4974.9092">返回A</text><polygon fill="#A80036" points="636,5040.1309,616,5048.1309,636,5056.1309,628,5048.1309" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="624" x2="928" y1="5048.1309" y2="5048.1309"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="200" x="648" y="5038.418">返回A，完成轮回</text><!--MD5=[67eeb8fe5faee054bac349e855bf1201]
@startuml
title 多级循环依赖
finishBeanFactoryInitialization -> preInstantiateSingletons: 准备实例化单例
preInstantiateSingletons - -> getBean: 开始创建第一个Bean A

getBean -> doGetBean:
doGetBean - -> createBean:Bean A不存在开始创建


createBean -> doCreateBean:
doCreateBean - -> createBeanInstance:A创建实例

createBeanInstance -> java.lang.reflect.Constructor#newInstance:无参构造实例化
doCreateBean - -> addSingletonFactory:A放入三级缓存。此时,三级缓存singletonFactories：A；二级缓存earlySingletonObjects: 无；一级缓存singletonObjects:无

doCreateBean -> populateBean:设置属性依赖
populateBean - -> postProcessProperties:循环BeanPostProcessor,找到AutowiredAnnotationBeanPostProcessor处理器

postProcessProperties -> findAutowiringMetadata:查找带autowired注解的属性元数据，找到B
postProcessProperties - -> inject:注入依赖属性

inject -> doResolveDependency:解决依赖
doResolveDependency - -> findAutowireCandidates:根据属性类型（属性类型有可能是接口）找到真正依赖的class类B

doResolveDependency -> resolveCandidate:解决依赖B
resolveCandidate - -> getBean:查找Bean B

getBean -> doGetBean:
doGetBean - -> createBean:Bean B不存在开始创建



createBean -> doCreateBean:
doCreateBean - -> createBeanInstance:B创建实例

createBeanInstance -> java.lang.reflect.Constructor#newInstance:无参构造实例化
doCreateBean - -> addSingletonFactory:B放入三级缓存。此时,三级缓存singletonFactories：A,B；二级缓存earlySingletonObjects: 无；一级缓存singletonObjects:无

doCreateBean -> populateBean:设置属性依赖
populateBean - -> postProcessProperties:循环BeanPostProcessor,找到AutowiredAnnotationBeanPostProcessor处理器

postProcessProperties -> findAutowiringMetadata:查找带autowired注解的属性元数据，找到C
postProcessProperties - -> inject:注入依赖属性

inject -> doResolveDependency:解决依赖
doResolveDependency - -> findAutowireCandidates:根据属性类型（属性类型有可能是接口）找到真正依赖的class类C

doResolveDependency -> resolveCandidate:解决依赖C
resolveCandidate - -> getBean:查找Bean C

getBean -> doGetBean:
doGetBean - -> createBean:Bean C不存在开始创建



createBean -> doCreateBean:
doCreateBean - -> createBeanInstance:C创建实例
createBeanInstance -> java.lang.reflect.Constructor#newInstance:无参构造实例化
doCreateBean - -> addSingletonFactory:C放入三级缓存。此时,三级缓存singletonFactories：A,B,C；二级缓存earlySingletonObjects: 无；一级缓存singletonObjects:无
doCreateBean -> populateBean:设置属性依赖
populateBean - -> postProcessProperties:循环BeanPostProcessor,找到AutowiredAnnotationBeanPostProcessor处理器
postProcessProperties -> findAutowiringMetadata:查找带autowired注解的属性元数据，找到A
postProcessProperties - -> inject:注入依赖属性
inject -> doResolveDependency:解决依赖
doResolveDependency - -> findAutowireCandidates:根据属性类型（属性类型有可能是接口）找到真正依赖的class类A
doResolveDependency -> resolveCandidate:解决依赖A


resolveCandidate - -> getBean:查找Bean A
getBean -> doGetBean:
doGetBean - -> getSingleton:此方法从三级缓存查到，然后放进二级缓存，并从三级缓存删除。此时三级缓存singletonFactories：B,C；二级缓存earlySingletonObjects: A；一级缓存singletonObjects:无 ；
getSingleton->getBean:返回
getBean- ->resolveCandidate:返回

resolveCandidate->doResolveDependency:返回
doResolveDependency- ->inject:返回
inject -> java.lang.reflect.Field.sets:真正设置C依赖A
inject- ->postProcessProperties:返回
postProcessProperties->populateBean:返回
populateBean- ->doCreateBean:返回
doCreateBean->createBean:返回
createBean- ->getSingleton:返回
getSingleton->addSingleton:把C放入一级缓存,从三级缓存移除
getSingleton- ->getBean:返回C
getBean->resolveCandidate:返回C

resolveCandidate- ->doResolveDependency:返回
doResolveDependency->inject:返回
inject - ->java.lang.reflect.Field.sets:真正设置B依赖C
inject->postProcessProperties:返回
postProcessProperties- ->populateBean:返回
populateBean->doCreateBean:返回
doCreateBean- ->createBean:返回
createBean->getSingleton:返回
getSingleton- ->addSingleton:把B放入一级缓存,从三级缓存移除
getSingleton->getBean:返回B
getBean- ->resolveCandidate:返回B

resolveCandidate->doResolveDependency:返回
doResolveDependency- ->inject:返回
inject -> java.lang.reflect.Field.sets:真正设置A依赖B
inject- ->postProcessProperties:返回
postProcessProperties->populateBean:返回
populateBean- ->doCreateBean:返回
doCreateBean->createBean:返回
createBean- ->getSingleton:返回
getSingleton->addSingleton:把A放入一级缓存,从二级缓存移除
getSingleton- ->getBean:返回A
getBean->preInstantiateSingletons:返回A，完成轮回











@enduml

PlantUML version 1.2019.11(Sun Sep 22 18:02:15 CST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b520.11
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>